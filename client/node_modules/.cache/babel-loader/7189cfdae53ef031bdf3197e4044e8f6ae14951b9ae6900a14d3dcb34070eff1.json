{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Thug Life/Desktop/Mern/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/Thug Life/Desktop/Mern/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Thug Life/Desktop/Mern/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Thug Life/Desktop/Mern/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{ChatState}from\"../Context/ChatProvider\";import Box from\"@mui/material/Box\";import ArrowCircleLeftIcon from\"@mui/icons-material/ArrowCircleLeft\";import UpdateGroupChatModal from\"./UpdateGroupChatModal\";import\"./ChattingStyling.css\";import{FormControl}from\"@mui/material\";import ScrollableChat from\"./ScrollableChat\";import io from\"socket.io-client\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ENDPOINT=\"http://localhost:5000\";var socket,selectedChatCompare;var SingleChat=function SingleChat(_ref){var fetchAgain=_ref.fetchAgain,setFetchAgain=_ref.setFetchAgain;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),newMessage=_useState6[0],setNewMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),socketConnected=_useState8[0],setSocketConnected=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),typing=_useState10[0],setTyping=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isTyping=_useState12[0],setIsTyping=_useState12[1];var _ChatState=ChatState(),user=_ChatState.user,selectedChat=_ChatState.selectedChat,setSelectedChat=_ChatState.setSelectedChat,notification=_ChatState.notification,setNotification=_ChatState.setNotification;var fetchMessages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(selectedChat){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;config={headers:{Authorization:\"Bearer \".concat(user.token)}};setLoading(true);_context.next=7;return axios.get(\"/api/message/\".concat(selectedChat._id),config);case 7:_yield$axios$get=_context.sent;data=_yield$axios$get.data;//console.log(messages);\n//console.log(data.sender);\n//console.log(data);\nsetMessages(data);setLoading(false);socket.emit(\"join chat\",selectedChat._id);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);window.alert(_context.t0.message);case 17:case\"end\":return _context.stop();}},_callee,null,[[2,14]]);}));return function fetchMessages(){return _ref2.apply(this,arguments);};}();useEffect(function(){socket=io(ENDPOINT);socket.emit(\"setup\",user);socket.on(\"connected\",function(){return setSocketConnected(true);});socket.on(\"typing\",function(){return setIsTyping(true);});socket.on(\"stop typing\",function(){return setIsTyping(false);});},[]);useEffect(function(){fetchMessages();selectedChatCompare=selectedChat;},[selectedChat]);useEffect(function(){socket.on(\"message received\",function(newMessageReceived){if(!selectedChatCompare||selectedChatCompare._id!==newMessageReceived.chat._id){//give notification\nif(!notification.includes(newMessageReceived)){setNotification.apply(void 0,[[newMessageReceived]].concat(_toConsumableArray(notification)));setFetchAgain(!fetchAgain);}}else{setMessages([].concat(_toConsumableArray(messages),[newMessageReceived]));}});});//console.log(notification, \"----------\");\nvar sendMessage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var config,_yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(event.key===\"Enter\"&&newMessage)){_context2.next=16;break;}socket.emit(\"stop typing\",selectedChat._id);_context2.prev=2;config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(user.token)}};setNewMessage(\"\");_context2.next=7;return axios.post(\"/api/message\",{content:newMessage,chatId:selectedChat._id},config);case 7:_yield$axios$post=_context2.sent;data=_yield$axios$post.data;//console.log(data);\nsocket.emit(\"new message\",data);setMessages([].concat(_toConsumableArray(messages),[data]));_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](2);window.alert(_context2.t0.message);case 16:case\"end\":return _context2.stop();}},_callee2,null,[[2,13]]);}));return function sendMessage(_x){return _ref3.apply(this,arguments);};}();var typingHandler=function typingHandler(e){setNewMessage(e.target.value);if(!socketConnected)return;if(!isTyping){setTyping(true);socket.emit(\"typing\",selectedChat._id);}var lastTypingTime=new Date().getTime();var timerLength=3000;setTimeout(function(){var timeNow=new Date().getTime();var timeDiff=timeNow-lastTypingTime;if(timeDiff>=timerLength&&typing){socket.emit(\"stop typing\",selectedChat._id);setTyping(false);}},timerLength);};//console.log(user.name);\n//console.log(selectedChat.users[0]);\n//console.log(selectedChat.users[1]);\n//console.log(selectedChat.map((user) => user.name));\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"SingleChatMain\",children:selectedChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"text\",{className:\"SingleChat\",children:[/*#__PURE__*/_jsx(ArrowCircleLeftIcon,{className:\"IconButton\",onClick:function onClick(){return setSelectedChat(\"\");},sx:{display:{xs:\"block\",sm:\"none\"}}}),!selectedChat.isGroupChat?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ArrowCircleLeftIcon,{className:\"IconButton\",onClick:function onClick(){return setSelectedChat(\"\");},sx:{display:{xs:\"none\",sm:\"block\"}}}),/*#__PURE__*/_jsx(\"img\",{src:selectedChat.users[0].email===user.email?selectedChat.users[1].pic:selectedChat.users[0].pic,alt:selectedChat.users[0].name,style:{width:\"50px\",height:\"50px\",borderRadius:\"50%\",objectFit:\"cover\",color:\"black\",margin:\"10px\"}}),selectedChat.users[0].email===user.email?selectedChat.users[1].name.toUpperCase():selectedChat.users[0].name.toUpperCase()]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ArrowCircleLeftIcon,{className:\"IconButton\",onClick:function onClick(){return setSelectedChat(\"\");},sx:{display:{xs:\"none\",sm:\"block\"}}}),selectedChat.chatName.toUpperCase(),/*#__PURE__*/_jsx(UpdateGroupChatModal,{fetchAgain:fetchAgain,setFetchAgain:setFetchAgain,fetchMessages:fetchMessages})]})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-end\",padding:\"3px\",width:\"100%\",height:\"100%\",borderRadius:\"large\",overflow:\"hidden\",children:[loading?/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"100%\",children:/*#__PURE__*/_jsx(\"img\",{style:{width:\"100%\",height:\"auto\",maxHeight:\"80vh\",paddingLeft:\"50px\"},src:\"./Images/loading.gif\",alt:\"loading\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"messages\",children:/*#__PURE__*/_jsx(ScrollableChat,{messages:messages})}),/*#__PURE__*/_jsxs(FormControl,{onKeyDown:sendMessage,isRequired:true,style:{marginBottom:\"61px\"},width:\"100%\",children:[isTyping?/*#__PURE__*/_jsx(\"img\",{src:\"./Images/typingLoading.gif\",alt:\"typing...\",loop:\"true\",style:{width:\"10%\",height:\"auto\"}}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"input\",{varient:\"filled\",placeholder:\"Enter a message....\",bg:\"#E0E0E0\",color:\"primary\",onChange:typingHandler,value:newMessage,style:{width:\"99%\",display:\"flex\",height:\"40px\",borderRadius:\"5px\",marginBottom:\"3px\",borderColor:\"linear-gradient(to right, #ff0000, #00ff00);\"}})]})]})]}):/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",height:\"100%\",children:/*#__PURE__*/_jsx(\"text\",{fontSize:\"28px\",children:\"Click on a user to start chatting\"})})});};export default SingleChat;","map":{"version":3,"names":["React","useState","useEffect","ChatState","Box","ArrowCircleLeftIcon","UpdateGroupChatModal","FormControl","ScrollableChat","io","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ENDPOINT","socket","selectedChatCompare","SingleChat","_ref","fetchAgain","setFetchAgain","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","loading","setLoading","_useState5","_useState6","newMessage","setNewMessage","_useState7","_useState8","socketConnected","setSocketConnected","_useState9","_useState10","typing","setTyping","_useState11","_useState12","isTyping","setIsTyping","_ChatState","user","selectedChat","setSelectedChat","notification","setNotification","fetchMessages","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","_yield$axios$get","data","wrap","_callee$","_context","prev","next","abrupt","headers","Authorization","concat","token","get","_id","sent","emit","t0","window","alert","message","stop","apply","arguments","on","newMessageReceived","chat","includes","_toConsumableArray","sendMessage","_ref3","_callee2","event","_yield$axios$post","_callee2$","_context2","key","post","content","chatId","_x","typingHandler","e","target","value","lastTypingTime","Date","getTime","timerLength","setTimeout","timeNow","timeDiff","className","children","onClick","sx","display","xs","sm","isGroupChat","src","users","email","pic","alt","name","style","width","height","borderRadius","objectFit","color","margin","toUpperCase","chatName","flexDirection","justifyContent","padding","overflow","alignItems","maxHeight","paddingLeft","onKeyDown","isRequired","marginBottom","loop","varient","placeholder","bg","onChange","borderColor","fontSize"],"sources":["C:/Users/Thug Life/Desktop/Mern/client/src/Modules/Chatting/Components/SingleChat.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { ChatState } from \"../Context/ChatProvider\";\r\nimport Box from \"@mui/material/Box\";\r\nimport ArrowCircleLeftIcon from \"@mui/icons-material/ArrowCircleLeft\";\r\nimport UpdateGroupChatModal from \"./UpdateGroupChatModal\";\r\nimport \"./ChattingStyling.css\";\r\nimport { FormControl } from \"@mui/material\";\r\nimport ScrollableChat from \"./ScrollableChat\";\r\nimport io from \"socket.io-client\";\r\nimport axios from \"axios\";\r\n\r\nconst ENDPOINT = \"http://localhost:5000\";\r\nvar socket, selectedChatCompare;\r\n\r\nconst SingleChat = ({ fetchAgain, setFetchAgain }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [newMessage, setNewMessage] = useState();\r\n  const [socketConnected, setSocketConnected] = useState(false);\r\n  const [typing, setTyping] = useState(false);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n\r\n  const { user, selectedChat, setSelectedChat, notification, setNotification } =\r\n    ChatState();\r\n\r\n  const fetchMessages = async () => {\r\n    if (!selectedChat) return;\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      };\r\n      setLoading(true);\r\n      const { data } = await axios.get(\r\n        `/api/message/${selectedChat._id}`,\r\n        config\r\n      );\r\n      //console.log(messages);\r\n      //console.log(data.sender);\r\n      //console.log(data);\r\n      setMessages(data);\r\n      setLoading(false);\r\n\r\n      socket.emit(\"join chat\", selectedChat._id);\r\n    } catch (error) {\r\n      window.alert(error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket = io(ENDPOINT);\r\n    socket.emit(\"setup\", user);\r\n    socket.on(\"connected\", () => setSocketConnected(true));\r\n    socket.on(\"typing\", () => setIsTyping(true));\r\n    socket.on(\"stop typing\", () => setIsTyping(false));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n    selectedChatCompare = selectedChat;\r\n  }, [selectedChat]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"message received\", (newMessageReceived) => {\r\n      if (\r\n        !selectedChatCompare ||\r\n        selectedChatCompare._id !== newMessageReceived.chat._id\r\n      ) {\r\n        //give notification\r\n        if (!notification.includes(newMessageReceived)) {\r\n          setNotification([newMessageReceived], ...notification);\r\n          setFetchAgain(!fetchAgain);\r\n        }\r\n      } else {\r\n        setMessages([...messages, newMessageReceived]);\r\n      }\r\n    });\r\n  });\r\n\r\n  //console.log(notification, \"----------\");\r\n\r\n  const sendMessage = async (event) => {\r\n    if (event.key === \"Enter\" && newMessage) {\r\n      socket.emit(\"stop typing\", selectedChat._id);\r\n      try {\r\n        const config = {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        };\r\n        setNewMessage(\"\");\r\n        const { data } = await axios.post(\r\n          \"/api/message\",\r\n          {\r\n            content: newMessage,\r\n            chatId: selectedChat._id,\r\n          },\r\n          config\r\n        );\r\n        //console.log(data);\r\n        socket.emit(\"new message\", data);\r\n        setMessages([...messages, data]);\r\n      } catch (error) {\r\n        window.alert(error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const typingHandler = (e) => {\r\n    setNewMessage(e.target.value);\r\n\r\n    if (!socketConnected) return;\r\n\r\n    if (!isTyping) {\r\n      setTyping(true);\r\n      socket.emit(\"typing\", selectedChat._id);\r\n    }\r\n\r\n    let lastTypingTime = new Date().getTime();\r\n    var timerLength = 3000;\r\n    setTimeout(() => {\r\n      var timeNow = new Date().getTime();\r\n      var timeDiff = timeNow - lastTypingTime;\r\n\r\n      if (timeDiff >= timerLength && typing) {\r\n        socket.emit(\"stop typing\", selectedChat._id);\r\n        setTyping(false);\r\n      }\r\n    }, timerLength);\r\n  };\r\n  //console.log(user.name);\r\n  //console.log(selectedChat.users[0]);\r\n  //console.log(selectedChat.users[1]);\r\n  //console.log(selectedChat.map((user) => user.name));\r\n  return (\r\n    <div className=\"SingleChatMain\">\r\n      {selectedChat ? (\r\n        <>\r\n          <text className=\"SingleChat\">\r\n            <ArrowCircleLeftIcon\r\n              className=\"IconButton\"\r\n              onClick={() => setSelectedChat(\"\")}\r\n              sx={{\r\n                display: { xs: \"block\", sm: \"none\" },\r\n              }}\r\n            />\r\n            {!selectedChat.isGroupChat ? (\r\n              <>\r\n                <ArrowCircleLeftIcon\r\n                  className=\"IconButton\"\r\n                  onClick={() => setSelectedChat(\"\")}\r\n                  sx={{\r\n                    display: { xs: \"none\", sm: \"block\" },\r\n                  }}\r\n                />\r\n                <img\r\n                  src={\r\n                    selectedChat.users[0].email === user.email\r\n                      ? selectedChat.users[1].pic\r\n                      : selectedChat.users[0].pic\r\n                  }\r\n                  alt={selectedChat.users[0].name}\r\n                  style={{\r\n                    width: \"50px\",\r\n                    height: \"50px\",\r\n                    borderRadius: \"50%\",\r\n                    objectFit: \"cover\",\r\n                    color: \"black\",\r\n                    margin: \"10px\",\r\n                  }}\r\n                />\r\n                {selectedChat.users[0].email === user.email\r\n                  ? selectedChat.users[1].name.toUpperCase()\r\n                  : selectedChat.users[0].name.toUpperCase()}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <ArrowCircleLeftIcon\r\n                  className=\"IconButton\"\r\n                  onClick={() => setSelectedChat(\"\")}\r\n                  sx={{\r\n                    display: { xs: \"none\", sm: \"block\" },\r\n                  }}\r\n                />\r\n                {selectedChat.chatName.toUpperCase()}\r\n                <UpdateGroupChatModal\r\n                  fetchAgain={fetchAgain}\r\n                  setFetchAgain={setFetchAgain}\r\n                  fetchMessages={fetchMessages}\r\n                />\r\n              </>\r\n            )}\r\n          </text>\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"flex-end\"\r\n            padding=\"3px\"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            borderRadius=\"large\"\r\n            overflow=\"hidden\"\r\n          >\r\n            {loading ? (\r\n              <Box\r\n                display=\"flex\"\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n                height=\"100%\"\r\n              >\r\n                <img\r\n                  style={{\r\n                    width: \"100%\",\r\n                    height: \"auto\",\r\n                    maxHeight: \"80vh\",\r\n                    paddingLeft: \"50px\",\r\n                  }}\r\n                  src=\"./Images/loading.gif\"\r\n                  alt=\"loading\"\r\n                />\r\n              </Box>\r\n            ) : (\r\n              <div className=\"messages\">\r\n                <ScrollableChat messages={messages} />\r\n              </div>\r\n            )}\r\n            <FormControl\r\n              onKeyDown={sendMessage}\r\n              isRequired\r\n              style={{ marginBottom: \"61px\" }}\r\n              width=\"100%\"\r\n            >\r\n              {isTyping ? (\r\n                <img\r\n                  src=\"./Images/typingLoading.gif\"\r\n                  alt=\"typing...\"\r\n                  loop=\"true\"\r\n                  style={{\r\n                    width: \"10%\",\r\n                    height: \"auto\",\r\n                  }}\r\n                />\r\n              ) : (\r\n                <></>\r\n              )}\r\n              <input\r\n                varient=\"filled\"\r\n                placeholder=\"Enter a message....\"\r\n                bg=\"#E0E0E0\"\r\n                color=\"primary\"\r\n                onChange={typingHandler}\r\n                value={newMessage}\r\n                style={{\r\n                  width: \"99%\",\r\n                  display: \"flex\",\r\n                  height: \"40px\",\r\n                  borderRadius: \"5px\",\r\n                  marginBottom: \"3px\",\r\n                  borderColor: \"linear-gradient(to right, #ff0000, #00ff00);\",\r\n                }}\r\n              />\r\n            </FormControl>\r\n          </Box>\r\n        </>\r\n      ) : (\r\n        <Box\r\n          display=\"flex\"\r\n          alignItems=\"center\"\r\n          justifyContent=\"center\"\r\n          height=\"100%\"\r\n        >\r\n          <text fontSize=\"28px\">Click on a user to start chatting</text>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SingleChat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}