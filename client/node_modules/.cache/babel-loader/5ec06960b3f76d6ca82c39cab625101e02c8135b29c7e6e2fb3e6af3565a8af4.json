{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Thug Life/Desktop/Mern/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Thug Life/Desktop/Mern/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Thug Life/Desktop/Mern/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Card,CardMedia,CardContent,Typography,Button,Grid,Dialog,DialogTitle,DialogContent,DialogActions}from\"@mui/material\";import{styled}from\"@mui/system\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledCard=styled(Card)(function(_ref){var theme=_ref.theme;return{maxWidth:345,margin:theme.spacing(2)};});var AllStudents=function AllStudents(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),students=_useState2[0],setStudents=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),deleteConfirmationOpen=_useState4[0],setDeleteConfirmationOpen=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedUserId=_useState6[0],setSelectedUserId=_useState6[1];var storedData=localStorage.getItem(\"userInfo\");var parsedData=JSON.parse(storedData);var token=parsedData.token;useEffect(function(){var fetchStudents=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/api/user/students\",{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setStudents(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchStudents(){return _ref2.apply(this,arguments);};}();fetchStudents();},[]);var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userId){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setSelectedUserId(userId);setDeleteConfirmationOpen(true);case 2:case\"end\":return _context2.stop();}},_callee2);}));return function handleDelete(_x){return _ref3.apply(this,arguments);};}();var confirmDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response,updatedStudents;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/api/user/\".concat(selectedUserId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}});case 3:response=_context3.sent;if(response.ok){// Refresh the list of students after successful deletion\nupdatedStudents=students.filter(function(student){return student._id!==selectedUserId;});setStudents(updatedStudents);}else{console.log(\"Error deleting user\");}_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:// Close the confirmation dialog\nsetDeleteConfirmationOpen(false);setSelectedUserId(null);case 12:case\"end\":return _context3.stop();}},_callee3,null,[[0,7]]);}));return function confirmDelete(){return _ref4.apply(this,arguments);};}();var cancelDelete=function cancelDelete(){// Close the confirmation dialog\nsetDeleteConfirmationOpen(false);setSelectedUserId(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-4\",children:\"All Students\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:students.map(function(student){return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(StyledCard,{children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"280\",image:student.pic,alt:student.name}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",children:student.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Email: \",student.email]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Role: \",student.role]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:function onClick(){return handleDelete(student._id);},children:\"Delete\"})]})},student._id);})}),/*#__PURE__*/_jsxs(Dialog,{open:deleteConfirmationOpen,onClose:cancelDelete,\"aria-labelledby\":\"delete-confirmation-dialog-title\",children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"delete-confirmation-dialog-title\",style:{color:\"red\"},children:\"Are you sure you want to remove the student from the website?\"}),/*#__PURE__*/_jsx(DialogContent,{}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:cancelDelete,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:confirmDelete,children:\"Yes\"})]})]})]});};export default AllStudents;","map":{"version":3,"names":["React","useState","useEffect","Card","CardMedia","CardContent","Typography","Button","Grid","Dialog","DialogTitle","DialogContent","DialogActions","styled","jsx","_jsx","jsxs","_jsxs","StyledCard","_ref","theme","maxWidth","margin","spacing","AllStudents","_useState","_useState2","_slicedToArray","students","setStudents","_useState3","_useState4","deleteConfirmationOpen","setDeleteConfirmationOpen","_useState5","_useState6","selectedUserId","setSelectedUserId","storedData","localStorage","getItem","parsedData","JSON","parse","token","fetchStudents","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","method","headers","Authorization","concat","sent","json","t0","console","log","stop","apply","arguments","handleDelete","_ref3","_callee2","userId","_callee2$","_context2","_x","confirmDelete","_ref4","_callee3","updatedStudents","_callee3$","_context3","ok","filter","student","_id","cancelDelete","className","children","container","map","item","xs","sm","md","component","height","image","pic","alt","name","variant","color","email","role","onClick","open","onClose","id","style"],"sources":["C:/Users/Thug Life/Desktop/Mern/client/src/Modules/Admin/AllStudents.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Card,\r\n  CardMedia,\r\n  CardContent,\r\n  Typography,\r\n  Button,\r\n  Grid,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@mui/material\";\r\nimport { styled } from \"@mui/system\";\r\n\r\nconst StyledCard = styled(Card)(({ theme }) => ({\r\n  maxWidth: 345,\r\n  margin: theme.spacing(2),\r\n}));\r\n\r\nconst AllStudents = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [deleteConfirmationOpen, setDeleteConfirmationOpen] = useState(false);\r\n  const [selectedUserId, setSelectedUserId] = useState(null);\r\n\r\n  const storedData = localStorage.getItem(\"userInfo\");\r\n  const parsedData = JSON.parse(storedData);\r\n  const token = parsedData.token;\r\n\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      try {\r\n        const response = await fetch(\"/api/user/students\", {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        const data = await response.json();\r\n        setStudents(data);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  const handleDelete = async (userId) => {\r\n    setSelectedUserId(userId);\r\n    setDeleteConfirmationOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n      const response = await fetch(`/api/user/${selectedUserId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      if (response.ok) {\r\n        // Refresh the list of students after successful deletion\r\n        const updatedStudents = students.filter(\r\n          (student) => student._id !== selectedUserId\r\n        );\r\n        setStudents(updatedStudents);\r\n      } else {\r\n        console.log(\"Error deleting user\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    // Close the confirmation dialog\r\n    setDeleteConfirmationOpen(false);\r\n    setSelectedUserId(null);\r\n  };\r\n\r\n  const cancelDelete = () => {\r\n    // Close the confirmation dialog\r\n    setDeleteConfirmationOpen(false);\r\n    setSelectedUserId(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2 className=\"mt-4\">All Students</h2>\r\n      <Grid container spacing={2}>\r\n        {students.map((student) => (\r\n          <Grid item key={student._id} xs={12} sm={6} md={4}>\r\n            <StyledCard>\r\n              <CardMedia\r\n                component=\"img\"\r\n                height=\"280\"\r\n                image={student.pic}\r\n                alt={student.name}\r\n              />\r\n              <CardContent>\r\n                <Typography variant=\"h6\" component=\"div\">\r\n                  {student.name}\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Email: {student.email}\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Role: {student.role}\r\n                </Typography>\r\n              </CardContent>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"error\"\r\n                onClick={() => handleDelete(student._id)}\r\n              >\r\n                Delete\r\n              </Button>\r\n            </StyledCard>\r\n          </Grid>\r\n        ))}\r\n      </Grid>\r\n\r\n      <Dialog\r\n        open={deleteConfirmationOpen}\r\n        onClose={cancelDelete}\r\n        aria-labelledby=\"delete-confirmation-dialog-title\"\r\n      >\r\n        <DialogTitle\r\n          id=\"delete-confirmation-dialog-title\"\r\n          style={{ color: \"red\" }}\r\n        >\r\n          Are you sure you want to remove the student from the website?\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {/* Additional content can be added here */}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={cancelDelete}>Cancel</Button>\r\n          <Button onClick={confirmDelete}>Yes</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllStudents;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}